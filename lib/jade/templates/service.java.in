package de.rwth_aachen.awap.jade.generated;

import jade.domain.FIPAAgentManagement.Property;
import jade.domain.FIPAAgentManagement.ServiceDescription;
import de.rwth_aachen.awap.ServiceClient;
import de.rwth_aachen.awap.ServiceProvider;
%% for service in services
import de.rwth_aachen.awap.service.{{ service.name }}Client;
import de.rwth_aachen.awap.service.{{ service.name }}Provider;
%% endfor

public class Service {
	public static ServiceDescription providerToDescription(ServiceProvider provider) throws Exception {
		ServiceDescription sd = new ServiceDescription();

%% for service in services
	%% if loop.first
		if(provider instanceof {{ service.name }}Provider) {
	%% else
		} else if(provider instanceof {{ service.name }}Provider) {
	%% endif
			sd.setType("{{ service.name }}");
			sd.setName("{{ service.name }}");
	%% if service.properties|length > 0
			{{ service.name }}Provider pp = ({{ service.name }}Provider)provider;
	%% endif
	%% for prop in service.properties
			{
		%% if prop.is_enum
				Object value = de.rwth_aachen.awap.jade.generated.Enum.{{ prop.enum_name | camelCase }}ToString(pp.{{ prop.name | camelCase }});
		%% else
				Object value = pp.{{ prop.name | camelCase }};
		%% endif
				sd.addProperties(new Property("{{ prop.name }}", value));
			}
	%% endfor
		}
%% endfor

		return sd;
	}
}
